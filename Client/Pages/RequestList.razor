@page "/"
@inject RequestSongService RequestSongService

<table class="req-list-table">
	<tr class="req-list-tr">
		<th class="req-list-th">No.</th>
		<th class="req-list-th">曲名</th>
		<th class="req-list-th">タイアップ</th>
		<th class="req-list-th">ファイル名</th>
		<th class="req-list-th">登録者</th>
		<th class="req-list-th">コメント</th>
		<th class="req-list-th">サムネイル</th>
	</tr>
	@foreach (RequestSong requestSong in requestSongs)
	{
		<tr @key="requestSong.Id" class="req-list-tr">
			<td class="req-list-td">@requestSong.Id</td>
			<td class="req-list-td">@requestSong.SongName</td>
			<td class="req-list-td">@requestSong.TieUpName</td>
			<td class="req-list-td">@requestSong.Path</td>
			<td class="req-list-td">@requestSong.User</td>
			<td class="req-list-td">@requestSong.Comment</td>
			<td class="req-list-td"><img src="/api/thumbnail/@requestSong.Id" /></td>
		</tr>
	}
</table>

@code
{
	private IEnumerable<RequestSong> requestSongs = new RequestSong[0];

	protected override async Task OnInitializedAsync()
	{
		try
		{
			requestSongs = await RequestSongService.GetRequestSongsAsync();
		}
		catch (Exception excep)
		{
			Debug.WriteLine(excep.Message);
			Debug.WriteLine(excep.StackTrace);
		}
	}

}
